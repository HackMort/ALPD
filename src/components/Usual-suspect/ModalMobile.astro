---
import ModalInfantsMobile from "./ModalInfantsMobile.astro";
import ModalAdultsMobile from "./ModalAdultsMobile.astro";
---

<Fragment>
    <ModalInfantsMobile />
    <ModalAdultsMobile />
</Fragment>

<script>
    /**
     * #################################################################################################
     * UsualSuspectModalMobile
     * #################################################################################################
     */

    import { usualSuspectModalInfants, usualSuspectModalAdults } from "./fancy";

    //Open the modals
    document.addEventListener("DOMContentLoaded", () => {
        const triggerBtns = document.querySelectorAll(
            ".btn--usual-suspect-modal-trigger"
        );
        triggerBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                //Save the target-data value
                const target = btn.getAttribute("data-target");

                //Open the modal
                if (target === "infants-modal") {
                    const modal = new usualSuspectModalInfants();
                    modal.open();
                } else if (target === "adults-modal") {
                    const modal = new usualSuspectModalAdults();
                    modal.open();
                }
            });
        });
    });

    //Expand all, accordions lists

    const collapseTrigger = document.querySelectorAll(
        ".usual-supect__list_modal_expand-link"
    );

    const accordionsList1 = document.querySelectorAll(
        "#acc-list--1 .accordion__item"
    );

    const accordionsList2 = document.querySelectorAll(
        "#acc-list--2 .accordion__item"
    );

    const accordionsList3 = document.querySelectorAll(
        "#acc-list--3 .accordion__item"
    );

    collapseTrigger.forEach((trigger) => {
        trigger.addEventListener("click", () => {
            event.preventDefault();

            if (trigger.getAttribute("href") == "#acc-list--1") {
                accordionsList1.forEach((accordion) => {
                    accordion.getAttribute("aria-expanded") === "true"
                        ? accordion.setAttribute("aria-expanded", "false")
                        : accordion.setAttribute("aria-expanded", "true");
                });
            } else if (trigger.getAttribute("href") == "#acc-list--2") {
                accordionsList2.forEach((accordion) => {
                    accordion.getAttribute("aria-expanded") === "true"
                        ? accordion.setAttribute("aria-expanded", "false")
                        : accordion.setAttribute("aria-expanded", "true");
                });
            } else if (trigger.getAttribute("href") == "#acc-list--3") {
                accordionsList3.forEach((accordion) => {
                    accordion.getAttribute("aria-expanded") === "true"
                        ? accordion.setAttribute("aria-expanded", "false")
                        : accordion.setAttribute("aria-expanded", "true");
                });
            }
        });
    });
</script>
